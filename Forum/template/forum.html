<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Di·ªÖn ƒë√†n Du l·ªãch - LocaGo!</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Poppins', 'Segoe UI', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');

        /* Header */
        header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 30px;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 32px;
            font-weight: 700;
            color: #1C6758;
            text-decoration: none;
            font-family: 'Poppins', sans-serif;
        }

        .logo span {
            color: #8EB486;
        }

        .nav-links {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            padding: 10px 18px;
            border-radius: 8px;
            transition: 0.3s;
            font-size: 15px;
            font-weight: 500;
            font-family: 'Poppins', sans-serif;
        }

        .nav-links a:hover {
            background: #f0f0f0;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1C6758, #8EB486) !important;
            color: white !important;
            font-weight: 600;
        }

        .btn-secondary {
            border: 2px solid #1C6758 !important;
            color: #1C6758 !important;
            font-weight: 600;
        }

        .btn-success {
            background: linear-gradient(135deg, #8EB486, #1C6758) !important;
            color: white !important;
            font-weight: 600;
        }

        .btn-danger {
            background: #e74c3c !important;
            color: white !important;
            font-weight: 600;
        }

        /* Hero Banner */
        .hero-banner {
            background: linear-gradient(135deg, #8EB486 0%, #1C6758 100%);
            padding: 80px 20px;
            text-align: center;
            color: white;
        }

        .hero-banner h1 {
            font-size: 3em;
            margin-bottom: 15px;
            font-weight: 700;
            font-family: 'Poppins', sans-serif;
        }

        .hero-banner p {
            font-size: 1.2em;
            opacity: 0.95;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Search Container */
        .search-container {
            max-width: 1000px;
            margin: -40px auto 40px;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
        }

        .search-box {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .search-box input {
            flex: 1;
            min-width: 300px;
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 50px;
            font-size: 15px;
            outline: none;
            transition: 0.3s;
        }

        .search-box input:focus {
            border-color: #8EB486;
            box-shadow: 0 0 0 3px rgba(142, 180, 134, 0.1);
        }

        .search-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #8EB486, #1C6758);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: 0.3s;
        }

        .search-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(142, 180, 134, 0.4);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .section-title {
            text-align: center;
            font-size: 2.2em;
            font-weight: 700;
            color: #333;
            margin-bottom: 40px;
            font-family: 'Poppins', sans-serif;
        }

        /* Post Card */
        .post-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            transition: 0.3s;
        }

        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .post-title {
            font-size: 1.5em;
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            font-family: 'Poppins', sans-serif;
        }

        .post-meta {
            display: flex;
            align-items: center;
            gap: 15px;
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }

        .post-author {
            font-weight: 600;
            color: #1C6758;
        }

        .badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 500;
        }

        .badge-success {
            background: #d4edda;
            color: #155724;
        }

        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }

        .post-content {
            color: #555;
            line-height: 1.8;
            margin-bottom: 20px;
        }

        .post-actions {
            display: flex;
            gap: 10px;
        }

        .btn-reply {
            padding: 12px 30px;
            background: transparent;
            border: 2px solid #8EB486;
            color: #1C6758;
            border-radius: 50px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-reply:hover {
            background: linear-gradient(135deg, #8EB486, #1C6758);
            color: white;
            border-color: transparent;
            transform: translateY(-2px);
        }

        .btn-reply-primary {
            background: linear-gradient(135deg, #8EB486, #1C6758);
            color: white;
            border: none;
        }

        .btn-reply-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(142, 180, 134, 0.4);
        }

        /* Answers Section */
        .answers-section {
            margin-top: 25px;
            padding-top: 25px;
            border-top: 2px solid #f0f0f0;
        }

        .answers-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #1C6758;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .answer-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #8EB486;
        }

        .answer-content {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .answer-author {
            font-size: 13px;
            color: #666;
            font-weight: 500;
        }

        .answer-author strong {
            color: #1C6758;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 80px 20px;
        }

        .empty-state-icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        .empty-state h3 {
            font-size: 1.8em;
            color: #666;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .empty-state p {
            color: #999;
            font-size: 1.1em;
            margin-bottom: 30px;
        }

        /* Scroll Top Button */
        #scrollTop {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #1C6758, #8EB486);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 20px;
            display: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: 0.3s;
            z-index: 999;
        }

        #scrollTop:hover {
            transform: translateY(-5px);
        }

        #scrollTop.show {
            display: block;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero-banner h1 {
                font-size: 2em;
            }

            .search-box {
                flex-direction: column;
            }

            .search-box input {
                min-width: 100%;
            }

            .nav-links {
                flex-wrap: wrap;
                gap: 10px;
            }

            .post-header {
                flex-direction: column;
            }

            .post-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="header-container">
            <a href="/" class="logo">Loca<span>Go!</span></a>
            <div class="nav-links">
                <select id="languageSelect">
                    <option value="vi">Ti·∫øng Vi·ªát</option>
                    <option value="en">English</option>
                </select>
                <a href="/MapRouting">B·∫£n ƒë·ªì</a>
                <a href="/chat_ui">Chatbot du l·ªãch</a>
                <a href="{{ url_for('forum.show_forum') }}">Forum</a>
                <a href="{{ url_for('login_bp.register') }}" class="btn-secondary">ƒêƒÉng k√Ω</a>
                <a href="{{ url_for('login_bp.login') }}" class="btn-primary">ƒêƒÉng nh·∫≠p</a>
            </div>
        </div>
    </header>
          
  <!-- Hero Banner -->
    <section class="hero-banner">
        <h1>C·ªông ƒë·ªìng Du l·ªãch LocaGo!</h1>
        <p>Chia s·∫ª kinh nghi·ªám, h·ªèi ƒë√°p v·ªÅ ƒë·ªãa ƒëi·ªÉm, ·∫©m th·ª±c, l·ªãch tr√¨nh v√† m·ªçi th·ª© v·ªÅ du l·ªãch!</p>
    </section>

    <!-- Search Container -->
    <div class="search-container">
        <form action="{{ url_for('forum.search_forum') }}" method="get">
            <div class="search-box">
                <input type="text" name="q" placeholder="T√¨m ki·∫øm c√¢u h·ªèi, ƒë·ªãa ƒëi·ªÉm, kinh nghi·ªám..." value="{{ query or '' }}">
                <button type="submit" class="search-button">T√¨m ki·∫øm</button>
            </div>
        </form>
    </div>

    <!-- Main Content -->
    <div class="container">
        <h2 class="section-title">C√°c c√¢u h·ªèi t·ª´ c·ªông ƒë·ªìng</h2>

        {% if posts %}
            {% for post in posts %}
            <div class="post-card">
                <div class="post-header">
                    <div>
                        <h3 class="post-title">{{ post['title'] }}</h3>
                        <div class="post-meta">
                            <span>üë§ <span class="post-author">{{ post['username'] }}</span>
                                {% if session.get('questioner_id') == post['questioner_id'] %}
                                    <span style="color: #1C6758; font-weight: 700;">(B·∫°n l√† T√°c gi·∫£)</span>
                                {% endif %}
                            </span>
                            <span>‚Ä¢</span>
                            <span>{{ post['created_at'][:10] if post.get('created_at') else 'N/A' }}</span>
                        </div>
                    </div>

                    <p class="post-content">{{ post['content'] }}</p>

                    <div class="post-actions">
                        </div>
                    
                    {% if post.get('answers') and post['answers']|length > 0 %}
                    <div class="answers-section">
                        <div class="answers-title">
                            C√¢u tr·∫£ l·ªùi t·ª´ c·ªông ƒë·ªìng ({{ post['answers']|length }})
                        </div>

                    {% if post['tag'] == 'answered' %}
                        <span class="badge badge-success">ƒê√£ c√≥ c√¢u tr·∫£ l·ªùi</span>
                    {% else %}
                        <span class="badge badge-warning">Ch·ªù tr·∫£ l·ªùi</span>
                    {% endif %}
                </div>
                {% endif %}
                <p class="post-content">{{ post['content'] }}</p>

                <div class="post-actions">
                    {% if session.get('questioner_id') %}
                        <a href="/post/{{ post['id'] }}/reply" class="btn-reply btn-reply-primary">Tr·∫£ l·ªùi c√¢u h·ªèi</a>
                    {% else %}
                        <a href="/login" class="btn-reply">ƒêƒÉng nh·∫≠p ƒë·ªÉ tr·∫£ l·ªùi</a>
                    {% endif %}
                </div>

                {% if post.get('answers') and post['answers']|length > 0 %}
                <div class="answers-section">
                    <div class="answers-title">
                        C√¢u tr·∫£ l·ªùi t·ª´ c·ªông ƒë·ªìng ({{ post['answers']|length }})
                    </div>
                    {% for ans in post['answers'] %}
                    <div class="answer-item">
                        <p class="answer-content">{{ ans['content'] }}</p>
                        <p class="answer-author">‚Äî <strong>{{ ans['answerer_username'] }}</strong> 
                            {% if ans['answerer_username'] == post['username'] %}
                                <span style="color: #8EB486; font-weight: 600;">(Ch·ªß ƒë·ªÅ)</span>
                            {% elif session.get('questioner_id') and ans['answerer_username'] == session.get('username') %}
                                <span style="color: #1C6758; font-weight: 600;">(C√¢u tr·∫£ l·ªùi c·ªßa b·∫°n)</span>
                            {% endif %}
                        </p>
                    </div>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <div class="empty-state-icon">üåç</div>
                <h3>Ch∆∞a c√≥ c√¢u h·ªèi n√†o</h3>
                <p>H√£y l√† ng∆∞·ªùi ƒë·∫ßu ti√™n ƒë·∫∑t c√¢u h·ªèi v·ªÅ du l·ªãch!</p>
                {% if session.get('questioner_id') %}
                    <a href="{{ url_for('forum.new_post') }}" class="btn-primary" style="text-decoration: none; padding: 15px 40px; border-radius: 50px; display: inline-block;">ƒê·∫∑t c√¢u h·ªèi ngay</a>
                {% else %}
                    <div class="btn-primary" style="text-decoration: none; padding: 15px 40px; border-radius: 50px; display: inline-block;">ƒêƒÉng nh·∫≠p ƒë·ªÉ ƒë·∫∑t c√¢u h·ªèi</div>
                {% endif %}
            </div>
        {% endif %}
    </div>

    <!-- Scroll to Top Button -->
    <button id="scrollTop" onclick="scrollToTop()">‚Üë</button>

    <script>
        // Show scroll to top button
        window.onscroll = function() {
            const btn = document.getElementById('scrollTop');
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                btn.classList.add('show');
            } else {
                btn.classList.remove('show');
            }
        };

        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    </script>

</body>
</html>
